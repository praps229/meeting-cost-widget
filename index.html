<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Meeting cost counter</title>

  <!-- Optional nice font (safe fallback if it fails to load) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg: #0b1020;
      --card: rgba(255,255,255,0.08);
      --card2: rgba(255,255,255,0.06);
      --border: rgba(255,255,255,0.14);
      --text: rgba(255,255,255,0.92);
      --muted: rgba(255,255,255,0.70);
      --muted2: rgba(255,255,255,0.55);
      --shadow: 0 18px 40px rgba(0,0,0,0.35);
      --radius: 20px;
      --accent: #7c3aed; /* violet */
      --accent2: #22c55e; /* green */
      --danger: #ef4444;
    }

    * { box-sizing: border-box; }
    body{
      margin:0;
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color: var(--text);
      background:
        radial-gradient(1200px 700px at 20% 10%, rgba(124,58,237,0.38), transparent 60%),
        radial-gradient(900px 600px at 90% 30%, rgba(34,197,94,0.22), transparent 55%),
        radial-gradient(900px 700px at 40% 90%, rgba(59,130,246,0.18), transparent 60%),
        var(--bg);
      min-height: 100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding: 28px;
    }

    .wrap{
      width: min(960px, 100%);
      display:grid;
      grid-template-columns: 1.15fr 0.85fr;
      gap: 18px;
    }

    @media (max-width: 860px){
      .wrap{ grid-template-columns: 1fr; }
    }

    .card{
      background: linear-gradient(180deg, var(--card), var(--card2));
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      backdrop-filter: blur(14px);
      padding: 20px;
    }

    .title{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 12px;
      margin-bottom: 14px;
    }

    .title h1{
      font-size: 18px;
      margin:0;
      font-weight: 700;
      letter-spacing: -0.01em;
    }

    .badge{
      font-size: 12px;
      color: var(--muted);
      border: 1px solid var(--border);
      padding: 6px 10px;
      border-radius: 999px;
      white-space: nowrap;
    }

    .grid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      margin-top: 12px;
    }

    @media (max-width: 520px){
      .grid{ grid-template-columns: 1fr; }
    }

    label{
      display:block;
      font-size: 12px;
      color: var(--muted);
      margin-bottom: 6px;
    }

    input, select{
      width:100%;
      padding: 12px 12px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,0.16);
      background: rgba(0,0,0,0.25);
      color: var(--text);
      outline: none;
      font-size: 14px;
    }

    input:focus, select:focus{
      border-color: rgba(124,58,237,0.6);
      box-shadow: 0 0 0 4px rgba(124,58,237,0.15);
    }

    .help{
      margin-top: 6px;
      font-size: 12px;
      color: var(--muted2);
      line-height: 1.35;
    }

    .buttons{
      display:flex;
      gap: 10px;
      margin-top: 14px;
      flex-wrap: wrap;
    }

    button{
      border: 0;
      border-radius: 14px;
      padding: 12px 14px;
      font-weight: 700;
      font-size: 14px;
      cursor: pointer;
      color: white;
      transition: transform 0.04s ease, opacity 0.2s ease;
    }
    button:active{ transform: translateY(1px); }

    .btn-start{
      background: linear-gradient(135deg, rgba(124,58,237,1), rgba(34,197,94,0.9));
      flex: 1;
      min-width: 160px;
    }
    .btn-pause{
      background: rgba(255,255,255,0.12);
      border: 1px solid rgba(255,255,255,0.16);
      color: var(--text);
    }
    .btn-reset{
      background: rgba(239,68,68,0.18);
      border: 1px solid rgba(239,68,68,0.30);
      color: #ffd7d7;
    }
    button[disabled]{
      opacity: 0.45;
      cursor: not-allowed;
    }

    .big{
      font-size: 64px;
      font-weight: 800;
      letter-spacing: -0.04em;
      margin: 10px 0 2px;
      line-height: 1.05;
      word-break: break-word;
    }

    .sub{
      font-size: 13px;
      color: var(--muted);
    }

    .statrow{
      display:flex;
      gap: 10px;
      flex-wrap: wrap;
      margin-top: 14px;
    }

    .pill{
      border: 1px solid rgba(255,255,255,0.14);
      background: rgba(0,0,0,0.16);
      border-radius: 999px;
      padding: 8px 10px;
      font-size: 12px;
      color: var(--muted);
    }

    .note{
      margin-top: 14px;
      font-size: 12px;
      color: var(--muted2);
      line-height: 1.45;
    }

    .footer{
      margin-top: 10px;
      font-size: 11px;
      color: rgba(255,255,255,0.45);
    }

    .mono{ font-variant-numeric: tabular-nums; }
  </style>
</head>

<body>
  <div class="wrap">
    <!-- Output -->
    <div class="card">
      <div class="title">
        <h1>Meeting cost counter</h1>
        <div class="badge">Ticks every 30 seconds</div>
      </div>

      <div class="sub">Meeting cost so far</div>
      <div id="cost" class="big mono">0</div>

      <div class="statrow">
        <div class="pill">Time: <span id="elapsed" class="mono">00:00:00</span></div>
        <div class="pill">People: <span id="peopleOut" class="mono">—</span></div>
        <div class="pill">Cost per person/hour: <span id="cphOut" class="mono">—</span></div>
      </div>

      <div class="note">
        Tip: Keep the assumptions simple and visible. This is a nudge, not an audit.
      </div>

      <div class="footer">
        You can change defaults by editing the “Defaults” section in the script.
      </div>
    </div>

    <!-- Controls -->
    <div class="card">
      <div class="title">
        <h1>Settings</h1>
        <div class="badge">Embeddable</div>
      </div>

      <div class="grid">
        <div>
          <label for="people">Number of people</label>
          <input id="people" type="number" min="1" step="1" value="8" />
          <div class="help">How many attendees are in the meeting.</div>
        </div>

        <div>
          <label for="currency">Currency</label>
          <select id="currency">
            <option value="SEK" selected>SEK</option>
            <option value="EUR">EUR</option>
            <option value="GBP">GBP</option>
            <option value="USD">USD</option>
          </select>
          <div class="help">Just controls the label shown next to the number.</div>
        </div>

        <div style="grid-column: 1 / -1;">
          <label for="cph">Cost per person per hour (optional override)</label>
          <input id="cph" type="number" min="0" step="1" placeholder="Leave blank to use the default" />
          <div class="help">
            If blank, we use the default below. If filled, we use your override.
          </div>
        </div>

        <div style="grid-column: 1 / -1;">
          <label for="defaultCph">Default cost per person per hour</label>
          <input id="defaultCph" type="number" min="0" step="1" value="650" />
          <div class="help">
            Set this once for your organisation (salary + on-costs, optionally overhead).
          </div>
        </div>
      </div>

      <div class="buttons">
        <button id="startBtn" class="btn-start">Start</button>
        <button id="pauseBtn" class="btn-pause" disabled>Pause</button>
        <button id="resetBtn" class="btn-reset" disabled>Reset</button>
      </div>

      <div class="note">
        If you want overhead included, bake it into the default hourly cost. Keep it consistent.
      </div>
    </div>
  </div>

<script>
  // Defaults (you can change these)
  const COST_TICK_SECONDS = 30;
  const TIME_TICK_SECONDS = 1;

  // Elements
  const elCost = document.getElementById("cost");
  const elElapsed = document.getElementById("elapsed");
  const elPeopleOut = document.getElementById("peopleOut");
  const elCphOut = document.getElementById("cphOut");

  const inpPeople = document.getElementById("people");
  const inpCurrency = document.getElementById("currency");
  const inpCph = document.getElementById("cph");
  const inpDefaultCph = document.getElementById("defaultCph");

  const btnStart = document.getElementById("startBtn");
  const btnPause = document.getElementById("pauseBtn");
  const btnReset = document.getElementById("resetBtn");

  // State
  let running = false;
  let startedAt = null;        // timestamp (ms)
  let pausedAt = null;         // timestamp (ms)
  let totalPausedMs = 0;

  let timeInterval = null;
  let costInterval = null;

  function safeNumber(value, fallback){
    const n = Number(value);
    return Number.isFinite(n) ? n : fallback;
  }

  function formatMoney(amount, currency){
    const rounded = Math.round(amount);
    // Use spaces as thousands separator, looks good in an embedded widget
    const withSpaces = rounded.toString().replace(/\B(?=(\d{3})+(?!\d))/g, " ");
    return `${withSpaces} ${currency}`;
  }

  function pad2(n){ return String(n).padStart(2, "0"); }

  function formatElapsed(ms){
    const total = Math.max(0, Math.floor(ms / 1000));
    const h = Math.floor(total / 3600);
    const m = Math.floor((total % 3600) / 60);
    const s = total % 60;
    return `${pad2(h)}:${pad2(m)}:${pad2(s)}`;
  }

  function getPeople(){
    const p = safeNumber(inpPeople.value, 0);
    return Math.max(1, Math.floor(p));
  }

  function getCurrency(){
    return inpCurrency.value || "SEK";
  }

  function getCostPerPersonPerHour(){
    const override = inpCph.value.trim();
    if (override !== ""){
      return Math.max(0, safeNumber(override, 0));
    }
    return Math.max(0, safeNumber(inpDefaultCph.value, 0));
  }

  function effectiveElapsedMs(nowMs){
    if (!startedAt) return 0;
    return Math.max(0, nowMs - startedAt - totalPausedMs);
  }

  function computeCost(nowMs){
    const people = getPeople();
    const cph = getCostPerPersonPerHour();
    const hours = effectiveElapsedMs(nowMs) / (1000 * 60 * 60);
    return people * cph * hours;
  }

  function render(){
    const now = Date.now();
    const currency = getCurrency();
    const people = getPeople();
    const cph = getCostPerPersonPerHour();

    elPeopleOut.textContent = people;
    elCphOut.textContent = formatMoney(cph, currency);

    const elapsedMs = effectiveElapsedMs(now);
    elElapsed.textContent = formatElapsed(elapsedMs);

    // Only tick the cost every 30 seconds (but we re-render on cost interval)
    const cost = computeCost(now);
    elCost.textContent = formatMoney(cost, currency);
  }

  function setUiState(){
    btnStart.disabled = running;
    btnPause.disabled = !running;
    btnReset.disabled = !startedAt;
    inpPeople.disabled = running;
    inpCurrency.disabled = running;
    inpCph.disabled = running;
    inpDefaultCph.disabled = running;
  }

  function start(){
    if (running) return;

    const now = Date.now();

    if (!startedAt){
      startedAt = now;
      totalPausedMs = 0;
    } else if (pausedAt){
      totalPausedMs += (now - pausedAt);
    }

    pausedAt = null;
    running = true;

    // Time updates every second (nice UX)
    timeInterval = setInterval(render, TIME_TICK_SECONDS * 1000);

    // Cost ticks every 30 seconds (as requested)
    costInterval = setInterval(render, COST_TICK_SECONDS * 1000);

    // Render instantly
    render();
    setUiState();
  }

  function pause(){
    if (!running) return;
    running = false;
    pausedAt = Date.now();

    clearInterval(timeInterval);
    clearInterval(costInterval);
    timeInterval = null;
    costInterval = null;

    render();
    setUiState();
  }

  function reset(){
    running = false;
    startedAt = null;
    pausedAt = null;
    totalPausedMs = 0;

    clearInterval(timeInterval);
    clearInterval(costInterval);
    timeInterval = null;
    costInterval = null;

    elCost.textContent = "0";
    elElapsed.textContent = "00:00:00";
    elPeopleOut.textContent = "—";
    elCphOut.textContent = "—";

    setUiState();
  }

  // Wire up buttons
  btnStart.addEventListener("click", start);
  btnPause.addEventListener("click", pause);
  btnReset.addEventListener("click", reset);

  // Keep outputs synced before starting
  ["input", "change"].forEach(evt => {
    inpPeople.addEventListener(evt, () => { if (!running) render(); });
    inpCurrency.addEventListener(evt, () => { if (!running) render(); });
    inpCph.addEventListener(evt, () => { if (!running) render(); });
    inpDefaultCph.addEventListener(evt, () => { if (!running) render(); });
  });

  // Initial render
  render();
  setUiState();
</script>

</body>
</html>
