<!doctype html>
<html lang="sv">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Möteskostnad</title>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">

<style>
:root{
  --card:#fff;
  --border:rgba(0,0,0,.12);
  --text:#111;
  --muted:#666;
  --accent:#2563eb;
  --danger:#b91c1c;
  --radius:16px;
}

*{box-sizing:border-box}

body{
  margin:0;
  font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  color:var(--text);
}

.widget{
  height:500px;
  padding:14px;
}

.card{
  height:100%;
  border:1px solid var(--border);
  border-radius:var(--radius);
  display:flex;
  flex-direction:column;
  overflow:hidden;
}

.topbar{
  padding:14px 16px;
  border-bottom:1px solid rgba(0,0,0,.08);
  display:flex;
  justify-content:space-between;
  align-items:center;
}

.title h1{
  margin:0;
  font-size:14px;
  font-weight:800;
}

.title .sub{
  font-size:12px;
  color:var(--muted);
}

.toggle{
  cursor:pointer;
  font-size:13px;
  font-weight:700;
  padding:8px 12px;
  border-radius:12px;
  border:1px solid var(--border);
  background:#fff;
}

.counter{
  flex:1;
  padding:18px 16px;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  text-align:center;
  gap:10px;
}

.big{
  font-size:56px;
  font-weight:800;
  letter-spacing:-0.04em;
  font-variant-numeric:tabular-nums;
}

.pill{
  display:inline-block;
  padding:6px 10px;
  font-size:12px;
  color:var(--muted);
  border:1px solid rgba(0,0,0,.1);
  border-radius:999px;
  margin-right:6px;
}

.buttons{
  padding:0 16px 16px;
  display:flex;
  justify-content:center;
  gap:10px;
}

button{
  border:none;
  border-radius:12px;
  padding:12px 14px;
  font-weight:800;
  font-size:14px;
  cursor:pointer;
}

button[disabled]{opacity:.45;cursor:not-allowed}

.btn-start{
  background:var(--accent);
  color:#fff;
  min-width:160px;
.btn-pause{background:#eee}
.btn-reset{background:#fdecec;color:var(--danger)}

.settings{
  border-top:1px solid rgba(0,0,0,.08);
  background:#ffffff;   /* <-- ensure pure white */
  overflow:hidden;
  max-height:0;
  transition:max-height .25s ease;
}

.settings-inner{
  padding:14px 16px;
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:12px;
}

@media (max-width:520px){
  .settings-inner{grid-template-columns:1fr}
  .big{font-size:44px}
}

label{
  font-size:12px;
  color:var(--muted);
  display:block;
  margin-bottom:4px;
}

input,select{
  width:100%;
  padding:10px 12px;
  border-radius:12px;
  border:1px solid var(--border);
  font-size:14px;
}
</style>
</head>

<body>
<div class="widget">
  <div class="card">

    <div class="topbar">
      <div class="title">
        <h1>Möteskostnad</h1>
        <div class="sub">Kostnaden ökar var 5:e sekund</div>
      </div>
      <div id="settingsToggle" class="toggle">Inställningar</div>
    </div>

    <div class="counter">
      <div style="font-size:12px;color:var(--muted)">Kostnad hittills</div>
      <div id="cost" class="big">0 kr</div>
      <div>
        <span class="pill">Tid: <span id="elapsed">00:00:00</span></span>
        <span class="pill"><span id="peopleOut">8</span> personer</span>
      </div>
    </div>

    <div class="buttons">
      <button id="start" class="btn-start">Starta</button>
      <button id="pause" class="btn-pause" disabled>Pausa</button>
      <button id="reset" class="btn-reset" disabled>Nollställ</button>
    </div>

    <div id="settings" class="settings">
      <div class="settings-inner">
        <div>
          <label>Antal personer</label>
          <input id="people" type="number" value="8" min="1">
        </div>
        <div>
          <label>Valuta</label>
          <select id="currency">
            <option value="SEK">SEK</option>
            <option value="EUR">EUR</option>
            <option value="GBP">GBP</option>
            <option value="USD">USD</option>
          </select>
        </div>
        <div>
          <label>Standardkostnad / timme</label>
          <input id="defaultCph" type="number" value="650">
        </div>
        <div>
          <label>Override (valfritt)</label>
          <input id="cph" type="number">
        </div>
      </div>
    </div>

  </div>
</div>

<script>
const COST_TICK_SECONDS = 5;

let startedAt=null, pausedAt=null, pausedMs=0;
let timer=null, ticker=null;

const $=id=>document.getElementById(id);

function elapsedMs(now){
  return startedAt ? now-startedAt-pausedMs : 0;
}

function meetingCost(now){
  const step=COST_TICK_SECONDS*1000;
  const quantised=Math.floor(elapsedMs(now)/step)*step;
  const hours=quantised/36e5;
  const people=Math.max(1,+$("people").value||1);
  const cph=+($("cph").value||$("defaultCph").value||0);
  return people*cph*hours;
}

function render(){
  const now=Date.now();
  $("elapsed").textContent=new Date(elapsedMs(now)).toISOString().substr(11,8);
  $("peopleOut").textContent=$("people").value;
  $("cost").textContent=new Intl.NumberFormat("sv-SE",{
    style:"currency",
    currency:$("currency").value,
    maximumFractionDigits:0
  }).format(meetingCost(now));
}

$("start").onclick=()=>{
  if(!startedAt) startedAt=Date.now();
  if(pausedAt) pausedMs+=Date.now()-pausedAt;
  pausedAt=null;
  timer=setInterval(render,1000);
  ticker=setInterval(render,COST_TICK_SECONDS*1000);
  $("start").disabled=true;
  $("pause").disabled=false;
  $("reset").disabled=false;
};

$("pause").onclick=()=>{
  pausedAt=Date.now();
  clearInterval(timer); clearInterval(ticker);
  $("start").disabled=false;
  $("pause").disabled=true;
};

$("reset").onclick=()=>{
  startedAt=pausedAt=pausedMs=0;
  clearInterval(timer); clearInterval(ticker);
  render();
  $("start").disabled=false;
  $("pause").disabled=true;
  $("reset").disabled=true;
};

$("settingsToggle").onclick=()=>{
  const s=$("settings");
  s.style.maxHeight = s.style.maxHeight && s.style.maxHeight!=="0px"
    ? "0px"
    : s.scrollHeight+"px";
};

render();
</script>
</body>
</html>
